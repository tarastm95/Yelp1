# üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö –≤ AI –≤—ñ–¥–ø–æ–≤—ñ–¥—è—Ö

## üìã –û–ø–∏—Å –ø—Ä–æ–±–ª–µ–º–∏

AI –≥–µ–Ω–µ—Ä—É–≤–∞–≤ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∑ **–ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏** –∑–∞–º—ñ—Å—Ç—å —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö –±—ñ–∑–Ω–µ—Å—É:

```
Good morning, Goui! Priority Remodeling specializes in home remodeling 
and we'd be delighted to assist with your project in the 33125 area...
Please give us a call at [phone number] to discuss your project details...
Best regards, [Your Name] Priority Remodeling
```

### ‚ùå –©–æ –±—É–ª–æ –Ω–µ —Ç–∞–∫:

- AI –ø–∏—Å–∞–≤ `[phone number]` –∑–∞–º—ñ—Å—Ç—å `(305) 816-1560`
- AI –ø–∏—Å–∞–≤ `[Your Name]` –∑–∞–º—ñ—Å—Ç—å `Ben` –∞–±–æ `Priority Remodeling Team`
- AI –ø–∏—Å–∞–≤ `[Location]` –∑–∞–º—ñ—Å—Ç—å —Ä–µ–∞–ª—å–Ω–æ—ó –∞–¥—Ä–µ—Å–∏

## üîç –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∏

User prompt –Ω–µ –º—ñ—Å—Ç–∏–≤ **—è–≤–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π** –ø—Ä–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö. –ü—Ä–æ–º–ø—Ç –±—É–≤ —Ç–∞–∫–∏–º:

```python
Business Information:
Phone: (305) 816-1560
Rating: 4.0/5 stars (12 reviews)

IMPORTANT: Start your response with the time-appropriate greeting...
Customer inquiry requires response based on the information above.
```

AI **–±–∞—á–∏–≤** –¥–∞–Ω—ñ, –∞–ª–µ –Ω–µ –º–∞–≤ **—è–≤–Ω–æ—ó —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó** —ó—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏. –ù–∞—Ç–æ–º—ñ—Å—Ç—å, —è–∫—â–æ –≤ Custom Instructions –±—É–ª–∏ –ø—Ä–∏–∫–ª–∞–¥–∏ –∑ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏, AI —ó—Ö –∫–æ–ø—ñ—é–≤–∞–≤.

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è

### –î–æ–¥–∞–Ω–æ CRITICAL TECHNICAL REQUIREMENTS –≤ user prompt

**–§–∞–π–ª:** `/var/www/yelp/backend/webhooks/ai_service.py`  
**–†—è–¥–∫–∏:** 996-1017

### –î–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:

```python
contextual_prompt = f"""Customer message:
"{customer_text}"

Customer name: {customer_name}
Business name: {business_name}
Time-appropriate greeting: {time_greeting}

Business Information:
{business_info}{vector_context}{length_instruction}

IMPORTANT: Start your response with the time-appropriate greeting ({time_greeting}) followed by the customer's name.

Customer inquiry requires response based on the information above."""
```

### –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:

```python
contextual_prompt = f"""Customer message:
"{customer_text}"

Customer name: {customer_name}
Business name: {business_name}
Time-appropriate greeting: {time_greeting}

Business Information:
{business_info}{vector_context}{length_instruction}

CRITICAL TECHNICAL REQUIREMENTS:
1. Use REAL business data from the Business Information section above
2. When mentioning contact information, use the ACTUAL phone number provided (not placeholders like [phone number] or [phone])
3. When signing the message, use a real person's name or "{business_name} Team" (not placeholders like [Your Name])
4. All data in Business Information is real and should be used as-is in your response

FORMATTING REQUIREMENTS:
- Start your response with the time-appropriate greeting ({time_greeting}) followed by the customer's name
- Generate a response following your role and communication style guidelines
- Include specific business information when relevant to the customer's inquiry

Generate your response now based on the customer inquiry and your instructions."""
```

## üéØ –Ø–∫ –ø—Ä–∞—Ü—é—î –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç—ñ–≤ OpenAI:

```python
messages = [
    {"role": "system", "content": custom_instructions},  # Custom Instructions (—Å—Ç–∏–ª—å, –æ—Å–æ–±–∏—Å—Ç—ñ—Å—Ç—å)
    {"role": "user", "content": contextual_prompt}       # –ó–∞–≤–¥–∞–Ω–Ω—è + –¥–∞–Ω—ñ + —Ç–µ—Ö–Ω—ñ—á–Ω—ñ –≤–∏–º–æ–≥–∏
]
```

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ AI:

1. **SYSTEM (Custom Instructions)** = "–•–¢–û —è, –Ø–ö —è —Å–ø—ñ–ª–∫—É—é—Å—è"
   - –û—Å–æ–±–∏—Å—Ç—ñ—Å—Ç—å (Ben, We The People Construction)
   - –°—Ç–∏–ª—å –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó (warm, friendly, hook-style questions)
   - –ü—Ä–∞–≤–∏–ª–∞ (no em dashes, natural language)

2. **USER (contextual prompt)** = "–©–û —Ä–æ–±–∏—Ç–∏, –¢–ï–•–ù–Ü–ß–ù–Ü –≤–∏–º–æ–≥–∏"
   - Customer message
   - Business data (phone, rating, location)
   - **CRITICAL TECHNICAL REQUIREMENTS** ‚Üê –Ω–æ–≤–µ!
   - Formatting requirements

### –í–∑–∞—î–º–æ–¥—ñ—è:

```
SYSTEM: "–¢–∏ - Ben. –ì–æ–≤–æ—Ä–∏ —Ç–µ–ø–ª–æ, –¥—Ä—É–∂–Ω—å–æ, –ø—Ä–∏—Ä–æ–¥–Ω–æ..."

USER: "–û—Å—å –∑–∞–ø–∏—Ç –∫–ª—ñ—î–Ω—Ç–∞ –ø—Ä–æ remodeling.
       –û—Å—å –¥–∞–Ω—ñ: Phone: (305) 816-1560
       
       CRITICAL: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –†–ï–ê–õ–¨–ù–ò–ô –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É,
                –ù–ï –ø–∏—à–∏ [phone number]!
       
       –í—ñ–¥–ø–æ–≤—ñ–¥–∞–π –∑–≥—ñ–¥–Ω–æ –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è–º–∏ –≤–∏—â–µ."
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** AI –¥–æ—Ç—Ä–∏–º—É—î—Ç—å—Å—è Custom Instructions (—Å—Ç–∏–ª—å Ben) + –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ (—Ç–µ—Ö–Ω—ñ—á–Ω—ñ –≤–∏–º–æ–≥–∏).

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è ‚ùå

```
Good morning, Goui! Priority Remodeling specializes in home remodeling...
Please give us a call at [phone number] to discuss your project details...
Best regards, [Your Name] Priority Remodeling
```

### –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è ‚úÖ

```
Good morning, Goui! How's your day going so far?

Thanks for reaching out about your bedroom remodel ‚Äì sounds like 
you're ready to transform the space and get it done quickly.

Do you already have a vision for what you'd like, or would it 
help to walk through it together? Once we see the space in person, 
we'll be able to map out the next steps.

Feel free to give us a call at (305) 816-1560 if you'd like to chat, 
or just let me know here what day works for a quick visit.

‚Äì Ben
Priority Remodeling
```

## ‚úÖ –ü–µ—Ä–µ–≤–∞–≥–∏ —Ä—ñ—à–µ–Ω–Ω—è

### 1. –ù–µ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—É—î –∑ Custom Instructions
- ‚úÖ Custom Instructions –∫–æ–Ω—Ç—Ä–æ–ª—é—î **—Å—Ç–∏–ª—å —ñ –æ—Å–æ–±–∏—Å—Ç—ñ—Å—Ç—å**
- ‚úÖ CRITICAL REQUIREMENTS –∫–æ–Ω—Ç—Ä–æ–ª—é—î **—Ç–µ—Ö–Ω—ñ—á–Ω—ñ –∞—Å–ø–µ–∫—Ç–∏**
- ‚úÖ –í–æ–Ω–∏ **–¥–æ–ø–æ–≤–Ω—é—é—Ç—å** –æ–¥–Ω–µ –æ–¥–Ω–æ–≥–æ, –Ω–µ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—É—é—Ç—å

### 2. –ü—Ä–∞—Ü—é—î –¥–ª—è –≤—Å—ñ—Ö –±—ñ–∑–Ω–µ—Å—ñ–≤
- ‚úÖ –ù–µ –ø–æ—Ç—Ä–µ–±—É—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ—Å–Ω—É—é—á–∏—Ö Custom Instructions
- ‚úÖ –ü—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–ª—è –Ω–æ–≤–∏—Ö —ñ —Å—Ç–∞—Ä–∏—Ö –±—ñ–∑–Ω–µ—Å—ñ–≤
- ‚úÖ –Ñ —Å–∏—Å—Ç–µ–º–Ω–∏–º –∑–∞—Ö–∏—Å—Ç–æ–º –≤—ñ–¥ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ñ–≤

### 3. –ü—Ä–∞—Ü—é—î –¥–ª—è –æ–±–æ—Ö —Ä–µ–∂–∏–º—ñ–≤
- ‚úÖ **No Phone and Phone Opt-In** —Ä–µ–∂–∏–º
- ‚úÖ **Phone Number in Message** —Ä–µ–∂–∏–º
- ‚úÖ –û–±–∏–¥–≤–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ç–æ–π —Å–∞–º–∏–π –∫–æ–¥

### 4. –Ø–≤–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó
- ‚úÖ –ß—ñ—Ç–∫–æ –≤–∫–∞–∑—É—î: "use ACTUAL phone number"
- ‚úÖ –î–∞—î –ø—Ä–∏–∫–ª–∞–¥–∏ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–∏—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ñ–≤
- ‚úÖ –ü—Ä–æ–ø–æ–Ω—É—î –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –ø—ñ–¥–ø–∏—Å—É

## üîç –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –î–µ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è:

1. **AI Full mode** (–±–µ–∑ Sample Replies)
   - `ai_service.py`, —Ñ—É–Ω–∫—Ü—ñ—è `_create_greeting_prompt`
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó greeting —Ç–∞ follow-up –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

2. **AI Vector mode** (–∑ Sample Replies)
   - –¢–æ–π —Å–∞–º–∏–π –ø—Ä–æ–º–ø—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ –æ—Å–Ω–æ–≤–∞
   - Vector context –¥–æ–¥–∞—î—Ç—å—Å—è –≤ —Å–µ–∫—Ü—ñ—é Business Information

### –Ø–∫—ñ –¥–∞–Ω—ñ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è:

```python
Business Information:
Phone: (305) 816-1560                      # ‚úÖ –†–µ–∞–ª—å–Ω–∏–π –Ω–æ–º–µ—Ä
Rating: 4.0/5 stars (12 reviews)          # ‚úÖ –†–µ–∞–ª—å–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥
Specializes in: General Contractors        # ‚úÖ –†–µ–∞–ª—å–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
Address: Miami, FL 33126                   # ‚úÖ –†–µ–∞–ª—å–Ω–∞ –∞–¥—Ä–µ—Å–∞
```

### –Ø–∫ AI —ó—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î:

```python
CRITICAL TECHNICAL REQUIREMENTS:
1. Use REAL business data from the Business Information section above
   ‚Üì
   AI: "Ok, —è –±–∞—á—É Phone: (305) 816-1560 - —Ü–µ –†–ï–ê–õ–¨–ù–ò–ô –Ω–æ–º–µ—Ä"

2. When mentioning contact information, use the ACTUAL phone number...
   ‚Üì
   AI: "–¢—Ä–µ–±–∞ –Ω–∞–ø–∏—Å–∞—Ç–∏ (305) 816-1560, –∞ –ù–ï [phone number]"

3. When signing the message, use a real person's name...
   ‚Üì
   AI: "–ü—ñ–¥–ø–∏—à—É—Å—å 'Ben' –∞–±–æ 'Priority Remodeling Team', –ù–ï [Your Name]"
```

## üéØ –í–∏—Å–Ω–æ–≤–æ–∫

**–ü—Ä–æ–±–ª–µ–º–∞:** AI –∫–æ–ø—ñ—é–≤–∞–≤ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∏ –∑ –ø—Ä–∏–∫–ª–∞–¥—ñ–≤ –∞–±–æ –≥–µ–Ω–µ—Ä—É–≤–∞–≤ –≤–ª–∞—Å–Ω—ñ, –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ.

**–ü—Ä–∏—á–∏–Ω–∞:** User prompt –Ω–µ –º—ñ—Å—Ç–∏–≤ —è–≤–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π –ø—Ä–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö.

**–†—ñ—à–µ–Ω–Ω—è:** –î–æ–¥–∞–Ω–æ —Å–µ–∫—Ü—ñ—é CRITICAL TECHNICAL REQUIREMENTS –∑ —è–≤–Ω–∏–º–∏ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è–º–∏:
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ –∑ Business Information
- –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∏
- –ü—Ä–∏–∫–ª–∞–¥–∏ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–∏—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ñ–≤
- –í–∞—Ä—ñ–∞–Ω—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø—ñ–¥–ø–∏—Å—É

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** AI —Ç–µ–ø–µ—Ä **–∑–∞–≤–∂–¥–∏** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ (—Ç–µ–ª–µ—Ñ–æ–Ω, —ñ–º'—è, –∞–¥—Ä–µ—Å—É) –∑–∞–º—ñ—Å—Ç—å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ñ–≤, –ø—Ä–∏ —Ü—å–æ–º—É –¥–æ—Ç—Ä–∏–º—É—é—á–∏—Å—å —Å—Ç–∏–ª—é —Ç–∞ –ø—Ä–∞–≤–∏–ª –∑ Custom Instructions.

---

**–î–∞—Ç–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** 31 –∂–æ–≤—Ç–Ω—è 2025  
**–§–∞–π–ª–∏ –∑–º—ñ–Ω–µ–Ω—ñ:** `/var/www/yelp/backend/webhooks/ai_service.py` (—Ä—è–¥–∫–∏ 996-1017)  
**–¢–∏–ø –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** –î–æ–¥–∞–Ω–æ —Ç–µ—Ö–Ω—ñ—á–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –≤ user prompt –±–µ–∑ –∑–º—ñ–Ω–∏ Custom Instructions

